<html>
  <head>
    <title>Animation experiments</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
        <div class="frame">
          <div class="frameText"></div>
        </div>

        <ul>
            <li>
              <span class="container">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" class="spark" id="spark2" viewBox="0 0 24 24"><!-- Icon from Iconoir by Luca Burgio - https://github.com/iconoir-icons/iconoir/blob/main/LICENSE --><path fill="#888888" stroke="#FFFFFF" stroke-linejoin="round" stroke-width="1.5" d="M8 15c4.875 0 7-2.051 7-7c0 4.949 2.11 7 7 7c-4.89 0-7 2.11-7 7c0-4.89-2.125-7-7-7ZM2 6.5c3.134 0 4.5-1.318 4.5-4.5c0 3.182 1.357 4.5 4.5 4.5c-3.143 0-4.5 1.357-4.5 4.5c0-3.143-1.366-4.5-4.5-4.5Z"/></svg>
                <a id="omori-headspace-sky" href="omori-headspace-sky/index.html">Omori Headspace Sky</a>
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" class="spark" id="spark1" viewBox="0 0 24 24"><!-- Icon from Iconoir by Luca Burgio - https://github.com/iconoir-icons/iconoir/blob/main/LICENSE --><path fill="none" stroke="#FFFFFF" stroke-linejoin="round" stroke-width="1.5" d="M3 12c6.268 0 9-2.637 9-9c0 6.363 2.713 9 9 9c-6.287 0-9 2.713-9 9c0-6.287-2.732-9-9-9Z"/></svg>
              </span>
            </li>
        </ul>
  </body>
</html>

<script type="module">    
    import { animate, utils, createSpring, createTimeline } from 'animejs';

    const [ $frame ] = utils.$('.frame');
    const [ $frameText ] = utils.$('.frameText');

    const frameText = "Animation experiments";
    let randomDelay = utils.random(0, 600);

    for (let i = 0; i < frameText.length; i++) {
        const node = document.createElement('span');
        node.innerHTML = frameText[i] === ' ' ? '&nbsp;' : frameText[i];
        $frameText.appendChild(node);
    }

    const frameAnimation = animate($frame,{  
        transform: ['scaleX(0)', 'scaleX(1)'],
        ease: 'cubic-bezier(0.25,-0.03, 0.82, 0.83)', 
        duration: 200,        
    });


    const frameAnimationText = animate($frameText.children,{
        opacity: [0,1],
        ease: 'easeOutQuad',    
        delay: (_, i) => i * 20,
    });

    const spark1Appear = animate("#spark1", {
      scale: [0, 1, 0],
      ease: 'steps(2)',
      duration: 600,
      loopDelay: 8000,      
      loop: true,
      alternate: true,
    });

    const spark2Appear = animate("#spark2", {
      scale: [0, 1, 0],
      ease: 'steps(2)',
      duration: 600,
      delay: () => randomDelay,
      loopDelay: 8000,      
      loop: true,
      alternate: true,
      onLoopComplete: () => {
        randomDelay = utils.random(0, 600);
      }
    });
    
    const frameTimeline = createTimeline()
    .add(frameAnimation)
    .add(frameAnimationText);


    const sparkTimeline = createTimeline()
    .add(spark1Appear)
    .add(spark2Appear);

    const timeline = createTimeline()
    .sync(frameTimeline)
    .sync(sparkTimeline);

</script> 